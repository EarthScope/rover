/*!
 * Bootstrap v3.1.1
 *
 * Copyright 2013 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world by @mdo and @fat.
 */

// Base of the BS3 distribution files
@bs-path: "../libs/bootstrap/3.3.1/less";

// Reset
@import "@{bs-path}/normalize.less";
@import "@{bs-path}/print.less";

// Core CSS
@import "@{bs-path}/scaffolding.less";
@import "@{bs-path}/type.less";
@import "@{bs-path}/code.less";
@import "@{bs-path}/grid.less";
@import "@{bs-path}/tables.less";
@import "@{bs-path}/forms.less";
@import "@{bs-path}/buttons.less";

// Components
@import "@{bs-path}/component-animations.less";
@import "@{bs-path}/glyphicons.less";
@import "@{bs-path}/dropdowns.less";
@import "@{bs-path}/button-groups.less";
@import "@{bs-path}/input-groups.less";
@import "@{bs-path}/navs.less";
@import "@{bs-path}/navbar.less";
@import "@{bs-path}/breadcrumbs.less";
@import "@{bs-path}/pagination.less";
@import "@{bs-path}/pager.less";
@import "@{bs-path}/labels.less";
@import "@{bs-path}/badges.less";
@import "@{bs-path}/jumbotron.less";
@import "@{bs-path}/thumbnails.less";
@import "@{bs-path}/alerts.less";
@import "@{bs-path}/progress-bars.less";
@import "@{bs-path}/media.less";
@import "@{bs-path}/list-group.less";
@import "@{bs-path}/panels.less";
@import "@{bs-path}/wells.less";
@import "@{bs-path}/close.less";

// Components w/ JavaScript
@import "@{bs-path}/modals.less";
@import "@{bs-path}/tooltip.less";
@import "@{bs-path}/popovers.less";
@import "@{bs-path}/carousel.less";

// This includes utilities
// Have to import last to override various things
@import "iris-mixins.less";
// @import "iris-theme.less";

// Styling for specific components from HQ
@import "hq.less";

// Main menu styles
@import "main-menu.less";

/* ====
 * DMS Styles
 * ==== */

/* ====
 * Base
 * ==== */

html, body {
  background-color: @body-bg;
  color: @text-color;
}

/* ==========
 * Typography
 * ========== */

h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
  margin: .5em 0;
  a {
    text-decoration: none;
  }
}

h1, .h1 { font-size: floor(@font-size-base * 2); } // ~36px
h2, .h2 { font-size: floor(@font-size-base * 1.45); } // ~30px
h3, .h3 { font-size: ceil(@font-size-base * 1.25); } // ~24px
h4, .h4 { font-size: ceil(@font-size-base * 1.08); } // ~18px
h5, .h5 { font-size:  ceil(@font-size-base * 0.93); }
h6, .h6 { font-size: ceil(@font-size-base * 0.85); } // ~12px

h1 small, .h1 small { font-size: ceil(@font-size-base * 1.25); } // ~24px
h2 small, .h2 small { font-size: ceil(@font-size-base * 1.08); } // ~18px
h3 small, .h3 small,
h4 small, .h4 small { font-size: @font-size-base; }

// Subheadings
h1 + h2, h2 + h3, h3 + h4 {
  margin-top: -.25em;
}

p {
//  margin: 1em 0;
}

h1 {
  color: @purple;
}

h2 {
  color: @red;
  font-weight: 500;
  font-size: 1.6em;
}

h3 {
  color: @dkred;
}

h6 {
  color: @gray;
}

// Exception for explicitly inline images
p img.inline {
  display: inline;
}


/* Default labels are regular weight, required labels are bold */
label {
  font-weight: normal;
}
label.requiredField {
  font-weight: bold;
}

/* ==========
 * Figures
 * ========== */
figure {
  display: table;
/* THIS APPEARS TO BREAK ON SAFARI & CHROME */
/*  width: 1px; */
}
figure img, figure figcaption {
  display: table-row;
  font-style: italic;
  margin: 0 auto;
}
figure.shadow {
  padding: 1em;
  background: none repeat scroll 0 0 white;
  border: 1px solid #cccccc;
  border-radius: @border-radius-large;
  background-clip: padding-box;
  .box-shadow(0 0 10px rgba(0,0,0,0.3));
}
figure.left {
  float: left;
  margin: 0 10px 0 0;
}
figure.right {
  float: right;
  margin: 0 0 0 10px;
}

// Apply margins to images floated via attributes (usually from textile)
img[align=left] {
  margin-right: 10px;
}
img[align=right] {
  margin-left: 10px;
}

// Use responsive sizing for images in figures and content
p img,
figure img,
figure figcaption {
  .img-responsive;
}

/* ==========
 * Articles
 * ========== */

article {
  & > figure {
    padding: 1em;
    margin: 0 auto 1em;
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    &.align-center {
      clear: both;
      margin-top: 1em;
    }
    &.align-right {
      clear: right;
      float:right;
      margin-left:1em;
    }
    &.align-left {
      clear: left;
      float:left;
      margin-right:1em;
    }
    & > figcaption {
      display:block;
      padding:0;
      margin:0 auto;
      text-align:center;
      font-style:italic;
    }
  }
}

h1, h2, h3, section {
  article > & {
    clear: left;
  }
}

// Image alignment based on article conventions
img.align-left {
  clear: left;
  float: left;
  margin-right: 1em;
}
img.align-right {
  float: right;
  clear: right;
  margin-left: 1em;
}
img.align-center {
  display: block;
  margin: 0 auto;
}

/* ==========
 * Bootstrap element overrides
 * ========== */

// Lighter modal backdrop
.modal-backdrop,
.modal-backdrop.fade.in {
  .opacity(.4);
}

/* =================
 * DMC landing classes
 * ================= */
.accordion-data {
  background: white url(/static/img/dms/dmc/accordion_landing/data.png) no-repeat bottom right !important;
}

.accordion-status {
  background: white url(/static/img/dms/dmc/accordion_landing/status.png) no-repeat bottom right !important;
}

.accordion-ws {
  background: white url(/static/img/dms/dmc/accordion_landing/ws.png) no-repeat bottom right !important;
}

.accordion-download {
  background: white url(/static/img/dms/dmc/accordion_landing/download.png) no-repeat bottom right !important;
}

.accordion-support {
  background: white url(/static/img/dms/dmc/accordion_landing/support.png) no-repeat bottom right !important;
}

.accordion-tools {
  background: white url(/static/img/dms/dmc/accordion_landing/tools.png) no-repeat bottom right !important;
}

/* =================
 * Apply column widths without the whole grid setup (particularly useful for form inputs)
 * Pulled from https://github.com/twbs/bootstrap/issues/10311
 * ================= */

.width-1  { width: percentage((1 / @grid-columns)); }
.width-2  { width: percentage((2 / @grid-columns)); }
.width-3  { width: percentage((3 / @grid-columns)); }
.width-4  { width: percentage((4 / @grid-columns)); }
.width-5  { width: percentage((5 / @grid-columns)); }
.width-6  { width: percentage((6 / @grid-columns)); }
.width-7  { width: percentage((7 / @grid-columns)); }
.width-8  { width: percentage((8 / @grid-columns)); }
.width-9  { width: percentage((9 / @grid-columns)); }
.width-10 { width: percentage((10/ @grid-columns)); }
.width-11 { width: percentage((11/ @grid-columns)); }
.width-12 { width: 100%; }

.width-auto { width: auto; }


/* ==========
 * Page notices
 * ========== */

// This mainly just tightens up the alert style

.notice-alert {
  padding: .5em 1em;
  line-height: 1.3;
  margin-bottom: .5em;
}
.notice-alert h4 {
  margin: 0;
}


/* ==========
 * Misc fixes
 * ========== */

// Bootstrap conflicts with Google Maps
.gmnoprint {
  img { max-width: none; }
  label { display: inline; }
}

pre.pre-x-scrollable {
  overflow-x:auto;
  word-wrap:normal;
  white-space:pre;
}
// No margin (for headings)
.no-margin { margin:0; }

// Inline input
.input-inline {
  display: inline;
  width: auto;
}
// Line-height inputs and buttons
.input-lineheight, .btn-lineheight {
  font-size: 90%;
  margin: 0;
  padding: 0;
}
.input-lineheight {
  height: 100%;
  vertical-align: baseline;
}
.btn-lineheight {
  border-radius: 3px;
  line-height: inherit;
  padding: 0 6px;
}

// Apply paragraph margins to any element
.p-margin {
  margin-top: 0;
  margin-bottom: (@line-height-computed / 2);
}

// Standard padding inside a container
.container-padding {
  padding: @padding-large-vertical @padding-large-horizontal;
}

// Bootstrap resets dd but doesn't reset ul/ol -- ensure they are all consistent
dd {
  margin-left: @padding-large-horizontal;
}
ul, ol {
  padding-left: @padding-large-horizontal;
}
// Allow other elements to be indented equally
.indent-1 {
  padding-left: @padding-large-horizontal;
}
.indent-2 {
  padding-left: (@padding-large-horizontal * 2);
}
.indent-3 {
  padding-left: (@padding-large-horizontal * 3);
}

// Minor DL prettifying, this shifts the items up a bit and tightens them when they wrap
dd {
  line-height: 1.25em;
  padding-bottom: .25em;
}

/* =================
 * Inline logo glyph
 * ================= */

.dmc-inline-logo {
  display:block;
  width:100px;
  height:100px;
  background: url(/static/img/icons/iris_app_logo.png) no-repeat center center;
}
.dmc-inline-logo strong {
  display:block;
  position:relative;
  top:73px;
  text-align:center;
  margin:0 auto;
  padding:0;
  color: @white;
  font-family: Helvetica, Arial, sans-serif;
}

/* ===============
 * Django-colophon
 * style anchors
 * =============== */

#page-content a.headerlink {
  color: @gray;
  font-size: 85%;
  font-weight: normal;
  padding: 0 4px 0 4px;
  text-decoration: none;
  visibility: hidden;
}
#page-content *:hover > a.headerlink {
  visibility: visible;
}

/* ===============
 * HTML5 <details>
 * default block
 * =============== */
details {
  display: block;
  padding-left: 8px;
  padding-right: 8px;
}
// Replicate h2 format (except color)
details > summary {
	.h2;
  font-family: @headings-font-family;
  font-weight: @headings-font-weight;
  line-height: @headings-line-height;
	display: block;
  cursor: pointer;
  outline: none;
}

/* ===============
 * HTML5 <details>
 * block for TOC
 * =============== */
// Based on panel style
.toc {
  .width-5;
  .pull-right;
}
.toc > details {
  .panel;
  .panel-default;
  background-color: #f9f9f9;
  margin-left: 20px;
}
.toc > details > summary {
  color: @red;
}
// TOC list children (matches heading hierarchy)
// ---------------------------------------------------
.toc > details {
  ul {
    padding-left: 7px;
    padding-right: 5px;
    list-style: none;
  }
}

// DMS Product Custom Glyph Icons
// ------------------------------
@dmsProductSpritePath:    "/static/img/icons/dms-products-glyph.png";
.product-category {
  display: inline-block;
  height: 24px;
  line-height: 24px;
  vertical-align: text-middle;
  background-image: url("@{dmsProductSpritePath}");
  background-repeat: no-repeat;
  padding-left:27px;
  margin-bottom:3px;
}
.product-category-internal    { background-position: 0px 0px; }
.product-category-contributed { background-position: 0px -27px; }
.product-category-funded      { background-position: 0px -54px; }

.product-label-internal          { background-color: @orange; }
.product-label-internal:hover,
.product-label-internal:focus    { background-color: darken(@orange, 10%); }
.product-label-contributed       { background-color: @brand-success; }
.product-label-contributed:hover,
.product-label-contributed:focus { background-color: darken(@brand-success, 10%); }
.product-label-funded            { background-color: @brand-info; }
.product-label-funded:hover,
.product-label-funded:focus      { background-color: darken(@brand-info, 10%); }

// Carousel-caption to stop text overlay on images
// -----------------------------------------------
.carousel-caption {
    position: static;
}

// MetaData Aggregator Icons
// -------------------------
.mda {
  font-family:"Times New Roman", Times, serif;
  font-size: 123.1%;
  text-transform: uppercase;
  background-color: #000000;
  color: #FFFFFF;
  padding:0 3px;
}
.mda-circle {
  border-radius: 50%;
  padding:0 4px;
}
.mda-archive {
  background-color: #0078D4;
}
.mda-realtime {
  background-color: #D44343;
}
.mda-restricted {
  background-color: #F89949;
}
.mda-partially {
  background-color: #43A743;
}

/* ===============
 * Spinner to indicate loading
 * This was created for the event page (http://www.iris.edu/ds/nodes/dmc/tools/event/4368729)
 * =============== */
.spinner {
  display: none;
}
// Set .show-spinner on a containing block to show the spinner
.show-spinner .spinner {
  display: inline-block;
}
// Small spinner, should fit inline with text
.spinner-12 {
  background: url(/static/img/rotator/rotator-12.gif) 0px 50% no-repeat;
  padding-left: 32px;
  min-height: 12px;
}
// Larger spinners
.spinner-16 {
  background: url(/static/img/rotator/rotator-16.gif) 0px 50% no-repeat;
  padding-left: 32px;
  min-height: 16px;
}
.spinner-32 {
  background: url(/static/img/rotator/rotator-32.gif) 0px 50% no-repeat;
  padding-left: 64px;
  min-height: 32px;
}

/* ===============
 * Add a custom carousel background to make captions visible
 * Currently used in Software and Workshop Django apps
 * =============== */
.carousel-bkgrd-dark {
  background-color: #333333;
}

/* ==================
 * Tabs with bordered content
 * ================== */

.tabs-bordered .tab-content {
  border-radius: 0 0 @border-radius-base @border-radius-base;
  border: 1px solid @nav-tabs-border-color;
  border-top: 0;
  margin-bottom: @line-height-computed;
}

.tabs-bordered.tabs-left .tab-content
{
    border: 1px solid @nav-tabs-border-color;
    border-left: 0;
}

.tabs-bordered.tabs-right .tab-content
{
    border: 1px solid @nav-tabs-border-color;
    border-right: 0;
}

.tabs-bordered.tabs-below .tab-content
{
    border: 1px solid @nav-tabs-border-color;
    border-bottom: 0;
}

/* ===================
 * Form actions style kept from BS2
 * =================== */
.form-actions {
  padding: @padding-base-vertical @padding-base-horizontal;
  margin-top: @padding-base-vertical;
  margin-bottom: @padding-base-vertical;
  background-color: #f5f5f5;
  border-top: 1px solid #e5e5e5;
  border-bottom: 1px solid #e5e5e5;
  .clearfix(); // Adding clearfix to allow for .pull-right button containers
}

/* ===================
 * User account navigation
 * =================== */
.user-nav {
  .pull-right;
  #gradient > .vertical(@start-color: #f2f2f2; @end-color: #fff);
  color: @wrapper-border-color;
  border: 1px solid @wrapper-border-color;
  border-top: 0;
  border-right: 0;
  border-bottom-left-radius: @border-radius-base;
  padding: 3px 8px 1px;
  line-height: 1;
  font-size: 11px;
}
.gravatar, .gravatar-thumbnail {
  box-sizing: content-box;
  border: 1px solid #ccc;
  background: #fff;
  .box-shadow(0 1px 2px rgba(0,0,0,.05));
}
.gravatar {
  padding: 4px;
  border-radius: @border-radius-base;
}
.gravatar-thumbnail {
  padding: 2px;
  border-radius: @border-radius-small;
}

/* ================
 * Horizontal panel
 * ================ */
.panel-horizontal {
  display: table;
  width: 100%;

  .panel-heading {
    display: table-cell;
    border-bottom: 0;
    border-right-width: 1px;
    border-right-style: solid;
    padding: 10px;
    width: 30px;
    .border-left-radius((@panel-border-radius - 1));
    .border-right-radius(0);
  }
  .panel-body {
    display: table-cell;
  }
}

/* ================
 * Container
 * ================ */

/**
 * Adjusting page to go full width
 */
.container {
  width: 100%;
  max-width: 1015px !important;
  overflow: hidden;
  padding-bottom: 50px;
}

.container-inner {
  box-shadow: 0 0px 7px 3px rgba(0,0,0,.25);
  border: 1px solid #aaa;
  border-top: none;
  background: #fff;
}

/**
 * Elements that provide vertical shadows only
 * The parent element must have position: relative, and a 1px border in the
 * direction of the shadow
 */
.shadow-up, .shadow-down {
    position: absolute;
    left: 0;
    right: 0;
}
.shadow-up {
    top: -8px;
    height: 7px;
    box-shadow: inset 0 -5px 7px -3px rgba(0,0,0,.25);
}
.shadow-down {
    bottom: -8px;
    height: 7px;
    box-shadow: inset 0 5px 7px -3px rgba(0,0,0,.25);
}


/* ================
 * JQueryUI Tweaks
 * This should be added last
 * ================ */
// @import "jquery-ui-bootstrap.less";

/* Datepicker trigger shows error state */
.has-error button.ui-datepicker-trigger {
  border-color: darken(@btn-danger-bg, 12%);
}

/* Fix to bring Datepicker z-index to the top*/
.ui-datepicker { z-index: 2 !important; }

/* ================
 * Select2 style
 * ================ */
// @import "select2-bootstrap.less";

/* ================
 * Labels for linked tags
 * ================ */
.no-underline {
  text-decoration: none !important;
}

/* ======
 * QTip2 styles
 * ====== */
.popup-help {
  display: inline;
  cursor: pointer;
}
.popup-help > div {
  display: none;
}
.qtip.qtip-bootstrap {
  font-size: 13px;
  line-height: 1.3;
}


/* ======
 * MarkItUp editor tweaks when shown in a Django form
 * ====== */

.form-group {
  .markItUp {
    width: auto;
  }
  .markItUpHeader {
    min-width: 500px;
    ul a {
      box-sizing: content-box;
    }
  }
  .markItUpEditor {
    width: 100%;
    font-family: @font-family-monospace;
  }
}


/* ======
 * Cachebuster
 * ====== */
.cachebuster {
  cursor: pointer;
  position: absolute;
  margin-top: 2px;
  font-size: 75%;
  color: #aaa;
}
.cachebuster:hover {
  color: #999;
  text-decoration: underline;
}

/* =============
 * Footer blurb (originally for WDS certification notice)
 * ============= */
.footer-alert {
  clear: both;
  text-align: center;
  padding-top: 20px;
  border-top: 1px solid #ddd;
  margin: 0 30px; /* This margin needs to match the padding on #page-content */
  .alert {
    padding: .3em 1em;
    display: inline-block;
    margin: 0;
  }
}
